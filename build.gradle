plugins {
    // Java support
    id "java"
    // Kotlin support
    id "org.jetbrains.kotlin.jvm" version "1.4.10"
    id 'org.jetbrains.intellij' version '0.5.0'
}
sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

repositories {
    mavenCentral()
    jcenter()
    maven {
        url "https://cache-redirector.jetbrains.com/jetbrains.bintray.com/intellij-plugin-service"
    }
    maven {
        url "https://cache-redirector.jetbrains.com/repo1.maven.org/maven2"
    }
    maven {
        url "https://cache-redirector.jetbrains.com/jcenter.bintray.com"
    }
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'

    //noinspection SpellCheckingInspection
    implementation('cn.hutool:hutool-core:5.3.9')
    //noinspection SpellCheckingInspection
    implementation('cn.hutool:hutool-http:5.3.9')

    implementation('dom4j:dom4j:1.6.1')

    implementation ('com.fasterxml.jackson.core:jackson-annotations:2.11.3')
    implementation ('com.fasterxml.jackson.core:jackson-core:2.11.3')
    implementation ('com.fasterxml.jackson.core:jackson-databind:2.11.3')

}

intellij {
    updateSinceUntilBuild false
    type 'IC'
//    version '2020.2'
//    version 'LATEST-EAP-SNAPSHOT'
    version '203.4449.2-EAP-SNAPSHOT'
    pluginName 'RestfulTool'

    plugins 'java', 'properties', 'yaml', 'Kotlin'
}

publishPlugin {
    // 发布插件，token在`https://plugins.jetbrains.com/author/me/tokens`申请
    token System.getenv("IDEA.Plugin.RestfulTool.Token")
    channels 'beta'
}

group 'cn.cloud.auto.restful.tool'
version '1.2.9'
patchPluginXml {
    changeNotes """
        <ul>
            <li>Adapt to IDEA 2020.3</li>
            <li>
            安装插件<a href='https://plugins.jetbrains.com/plugin/13710-chinese-simplified-language-pack-eap'>Chinese (Simplified) Language Pack EAP</a>自动显示中文
            </li>
        </ul>
    """
}